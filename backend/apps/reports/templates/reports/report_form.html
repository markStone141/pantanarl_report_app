{% extends "base.html" %}

{% block title %}{{ title }} | Report App{% endblock %}

{% block content %}
<div class="container">
  <header class="topbar">
    <strong>{{ title }}</strong>
    <nav>
      <a href="{% url 'report_index' %}">報告一覧</a>
      <a href="{% url 'dashboard_index' %}">管理者ページ</a>
      <a href="{% url 'home' %}" class="logout-link">ログアウト</a>
    </nav>
  </header>

  <section class="card" style="margin-top: 16px;">
    <h3>入力項目（{{ dept_code }}）</h3>
    <p class="muted">責任者が部署全員分を一括入力。保存時はメンバーごとに分割して登録する想定。</p>

    <div class="grid grid-2">
      <div>
        <label>報告日</label>
        <input type="date" />
      </div>
      <div>
        <label>責任者</label>
        <select>
          <option value="">選択してください</option>
          {% for member in members %}
          <option value="{{ member.id }}" {% if default_reporter_id and member.id == default_reporter_id %}selected{% endif %}>{{ member.name }}</option>
          {% endfor %}
        </select>
      </div>
    </div>

    <label style="margin-top: 12px;">メンバー別入力</label>
    <table>
      <thead>
        <tr>
          <th>メンバー</th>
          <th>件数</th>
          <th>金額(円)</th>
          <th>{{ location_label }}</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>
            <select>
              <option value="">選択してください</option>
              {% for member in members %}
              <option value="{{ member.id }}">{{ member.name }}</option>
              {% endfor %}
            </select>
          </td>
          <td><input type="number" placeholder="0" /></td>
          <td><input type="number" placeholder="0" /></td>
          <td><input placeholder="{% if location_value %}{{ location_value }}{% else %}{{ location_label }}{% endif %}" value="{{ location_value }}" {% if location_value %}readonly{% endif %} /></td>
        </tr>
        <tr>
          <td>
            <select>
              <option value="">選択してください</option>
              {% for member in members %}
              <option value="{{ member.id }}">{{ member.name }}</option>
              {% endfor %}
            </select>
          </td>
          <td><input type="number" placeholder="0" /></td>
          <td><input type="number" placeholder="0" /></td>
          <td><input placeholder="{% if location_value %}{{ location_value }}{% else %}{{ location_label }}{% endif %}" value="{{ location_value }}" {% if location_value %}readonly{% endif %} /></td>
        </tr>
      </tbody>
    </table>
    {% if not members %}
    <div class="note" style="margin-top: 10px;">
      この部署に所属するメンバーが未設定です。管理者ページのメンバー登録で所属部署を設定してください。
    </div>
    {% endif %}

    <div style="margin-top: 10px;">
      <label>全体メモ</label>
      <input placeholder="本日の共有事項" />
    </div>

    <div style="margin-top: 14px;">
      <button type="button">部署分を一括保存（デモ）</button>
    </div>
  </section>
</div>
{% endblock %}
